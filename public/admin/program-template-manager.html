<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>ANX • Program &amp; Template Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css">
  <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.min.js"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { anx: { sky: '#0ea5e9' }}}}};
  </script>
  <style>
    :root {
      color-scheme: light;
      --surface: #ffffff;
      --surface-alt: #f8fafc;
      --border: #e2e8f0;
      --ink: #0f172a;
      --ink-muted: #64748b;
      --brand-primary: #2563eb;
      --brand-accent: #7c3aed;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: var(--surface-alt);
      color: var(--ink);
    }

    .panel {
      border-radius: 1rem;
      border: 1px solid var(--border);
      background-color: var(--surface);
      box-shadow: 0 10px 25px -12px rgba(15, 23, 42, 0.35);
    }

    .panel-section {
      border-radius: 0.75rem;
      border: 1px solid var(--border);
      background-color: var(--surface);
    }

    .label-text {
      display: block;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--ink-muted);
    }

    .input {
      width: 100%;
      border-radius: 0.75rem;
      border: 1px solid var(--border);
      background-color: var(--surface);
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      color: var(--ink);
      transition: box-shadow 0.15s ease, border-color 0.15s ease;
    }

    .input:focus {
      outline: none;
      border-color: var(--brand-primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }

    .textarea {
      width: 100%;
      border-radius: 0.75rem;
      border: 1px solid var(--border);
      background-color: var(--surface);
      padding: 0.75rem;
      font-size: 0.875rem;
      color: var(--ink);
      transition: box-shadow 0.15s ease, border-color 0.15s ease;
      min-height: 6rem;
      resize: vertical;
    }

    .textarea:focus {
      outline: none;
      border-color: var(--brand-primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      border-radius: 0.75rem;
      border: 1px solid var(--border);
      background-color: var(--surface);
      padding: 0.5rem 0.85rem;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--ink);
      transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
      cursor: pointer;
    }

    .btn-primary {
      border-color: var(--brand-primary);
      background-color: var(--brand-primary);
      color: #fff;
    }

    .btn-primary:hover {
      border-color: var(--brand-accent);
      background-color: var(--brand-accent);
    }

    .btn-outline {
      border-color: var(--border);
      background-color: var(--surface);
      color: var(--ink);
    }

    .btn-outline:hover {
      background-color: var(--surface-alt);
    }

    .btn-ghost {
      border-color: transparent;
      background-color: transparent;
      color: var(--ink-muted);
    }

    .btn-ghost:hover {
      background-color: var(--surface-alt);
      color: var(--ink);
    }

    .btn:disabled {
      cursor: not-allowed;
      opacity: 0.55;
    }

    .btn-danger {
      border-color: #dc2626;
      background-color: #dc2626;
      color: #fff;
    }

    .btn-danger:hover {
      border-color: #b91c1c;
      background-color: #b91c1c;
    }

    .btn-danger-outline {
      border-color: #ef4444;
      background-color: var(--surface);
      color: #b91c1c;
    }

    .btn-danger-outline:hover {
      background-color: #fef2f2;
      color: #991b1b;
    }

    .sort-trigger {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      width: 100%;
      padding: 0;
      margin: 0;
      border: none;
      background: transparent;
      color: inherit;
      font: inherit;
      text-transform: inherit;
      letter-spacing: inherit;
      cursor: pointer;
    }

    .sort-trigger:focus {
      outline: none;
    }

    .sort-trigger:focus-visible {
      outline: 2px solid rgba(14, 165, 233, 0.4);
      outline-offset: 2px;
      border-radius: 0.375rem;
    }

    .sort-indicator {
      display: inline-flex;
      flex-direction: column;
      line-height: 0.75;
      font-size: 0.55rem;
      margin-left: 0.125rem;
      opacity: 0;
      transition: opacity 0.15s ease;
    }

    .sort-indicator .sort-arrow {
      opacity: 0.25;
      transition: opacity 0.15s ease;
    }

    th[data-key]:hover .sort-indicator,
    th[data-key]:focus-within .sort-indicator {
      opacity: 0.5;
    }

    .sort-indicator[data-state="active"] {
      opacity: 1;
    }

    .sort-indicator[data-direction="asc"] .sort-arrow-asc,
    .sort-indicator[data-direction="desc"] .sort-arrow-desc {
      opacity: 1;
    }

    body.modal-open {
      overflow: hidden;
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      background-color: rgba(15, 23, 42, 0.5);
      z-index: 50;
    }

    .modal-overlay.is-open {
      display: flex;
    }

    .modal-overlay-confirm {
      z-index: 60;
    }

    .modal {
      width: 100%;
      max-width: 36rem;
      border-radius: 1rem;
      border: 1px solid var(--border);
      background-color: var(--surface);
      box-shadow: 0 32px 64px -24px rgba(15, 23, 42, 0.5);
      display: flex;
      flex-direction: column;
    }

    .modal-sm {
      max-width: 28rem;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--border);
    }

    .modal-body {
      padding: 1.25rem;
      max-height: min(70vh, 600px);
      overflow-y: auto;
    }

    .modal-footer {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 0.75rem;
      padding: 1rem 1.25rem;
      border-top: 1px solid var(--border);
      flex-wrap: wrap;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      text-align: left;
    }

    .table th,
    .table td {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      font-size: 0.875rem;
    }

    .table tbody tr:hover {
      background-color: var(--surface-alt);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 0.125rem 0.5rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .badge-published {
      background-color: rgba(34, 197, 94, 0.18);
      color: #15803d;
    }

    .badge-draft {
      background-color: rgba(59, 130, 246, 0.18);
      color: #1d4ed8;
    }

    .badge-deprecated {
      background-color: rgba(251, 191, 36, 0.24);
      color: #b45309;
    }

    .badge-archived {
      background-color: rgba(148, 163, 184, 0.25);
      color: #475569;
    }

    .empty-row td {
      text-align: center;
      padding: 2.5rem 1rem;
      color: var(--ink-muted);
      font-size: 0.875rem;
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="max-w-6xl mx-auto p-4 space-y-6">
    <header class="flex items-center justify-between gap-4 flex-wrap">
      <div>
        <h1 class="text-2xl font-bold">Program &amp; Template Manager</h1>
        <p class="text-sm text-slate-500">Coordinate program lifecycles and fine-tune reusable templates.</p>
      </div>
      <div class="flex items-center gap-3 flex-wrap justify-end">
        <div class="flex flex-wrap gap-2">
          <a href="/admin/user-manager" class="btn btn-outline text-sm">Users</a>
          <a href="/admin/role-manager.html" class="btn btn-outline text-sm">Roles &amp; Programs</a>
          <a href="/admin/program-template-manager.html" class="btn btn-primary text-sm">Program Templates</a>
        </div>
        <a href="/" class="text-sm text-anx-sky underline">← Back to Orientation</a>
      </div>
    </header>

    <section class="panel p-4 md:p-6 space-y-4" id="programSection">
      <div class="flex items-start justify-between gap-3 flex-wrap">
        <div>
          <h2 class="text-xl font-semibold">Programs</h2>
          <p class="text-sm text-slate-500">Select programs to publish, deprecate, or restore.</p>
        </div>
        <div class="flex items-center gap-2 flex-wrap justify-end">
          <label class="flex items-center gap-2 text-sm">
            <input type="checkbox" id="hideArchived" class="rounded border-slate-300">
            Hide archived
          </label>
          <button id="btnNewProgram" class="btn btn-primary text-sm">New Program</button>
          <button id="btnEditProgram" class="btn btn-outline text-sm" disabled>Edit Program</button>
          <button id="exportCsv" class="btn btn-outline text-sm">Export CSV</button>
          <button id="btnRefreshPrograms" class="btn btn-outline text-sm">Refresh</button>
        </div>
      </div>

      <div class="grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-end">
        <label class="space-y-1">
          <span class="label-text">Search programs</span>
          <input id="programSearch" class="input" placeholder="Search by title, lifecycle, or description…">
        </label>
        <div id="programSelectionSummary" class="text-xs text-slate-500 md:text-right">No programs selected.</div>
      </div>

      <div class="flex items-center justify-between gap-3 flex-wrap text-xs text-slate-500">
        <label class="flex items-center gap-2 font-semibold uppercase tracking-wide">
          <span>Rows per page</span>
          <select id="programPageSize" class="input w-24 text-sm font-medium normal-case">
            <option value="10" selected>10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="all">All</option>
          </select>
        </label>
        <div id="pager" class="flex items-center gap-2">
          <button type="button" id="programPagerPrev" class="btn btn-outline text-xs">Prev</button>
          <span id="programPagerLabel" class="text-xs">Page 0 of 0</span>
          <button type="button" id="programPagerNext" class="btn btn-outline text-xs">Next</button>
        </div>
      </div>

      <div class="panel-section overflow-hidden">
        <div class="overflow-x-auto">
          <table class="table min-w-full" id="programTable">
            <thead class="bg-slate-100 text-xs uppercase tracking-wide text-slate-500">
              <tr>
                <th class="w-10">
                  <input type="checkbox" id="programSelectAll" class="rounded border-slate-300">
                </th>
                <th data-key="title" data-type="string">
                  <button type="button" class="sort-trigger">
                    <span>Title</span>
                    <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                      <span class="sort-arrow sort-arrow-asc">▲</span>
                      <span class="sort-arrow sort-arrow-desc">▼</span>
                    </span>
                  </button>
                </th>
                <th data-key="lifecycle" data-type="string">
                  <button type="button" class="sort-trigger">
                    <span>Lifecycle</span>
                    <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                      <span class="sort-arrow sort-arrow-asc">▲</span>
                      <span class="sort-arrow sort-arrow-desc">▼</span>
                    </span>
                  </button>
                </th>
                <th data-key="weeks" data-type="number">
                  <button type="button" class="sort-trigger">
                    <span>Weeks</span>
                    <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                      <span class="sort-arrow sort-arrow-asc">▲</span>
                      <span class="sort-arrow sort-arrow-desc">▼</span>
                    </span>
                  </button>
                </th>
                <th data-key="description" data-type="string">
                  <button type="button" class="sort-trigger">
                    <span>Description</span>
                    <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                      <span class="sort-arrow sort-arrow-asc">▲</span>
                      <span class="sort-arrow sort-arrow-desc">▼</span>
                    </span>
                  </button>
                </th>
                <th data-key="createdAt" data-type="date">
                  <button type="button" class="sort-trigger">
                    <span>Created</span>
                    <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                      <span class="sort-arrow sort-arrow-asc">▲</span>
                      <span class="sort-arrow sort-arrow-desc">▼</span>
                    </span>
                  </button>
                </th>
                <th class="text-right" data-key="archivedAt" data-type="date">
                  <button type="button" class="sort-trigger justify-end">
                    <span>Archived</span>
                    <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                      <span class="sort-arrow sort-arrow-asc">▲</span>
                      <span class="sort-arrow sort-arrow-desc">▼</span>
                    </span>
                  </button>
                </th>
              </tr>
            </thead>
            <tbody id="programTableBody" class="bg-white text-sm"></tbody>
          </table>
        </div>
      </div>

      <div class="space-y-1">
        <div class="flex flex-wrap gap-2" id="programActions">
          <button class="btn btn-primary" data-program-action="publish">Publish</button>
          <button class="btn btn-outline" data-program-action="deprecate">Deprecate</button>
          <button class="btn btn-outline" data-program-action="restore">Restore</button>
        </div>
        <div id="programActionHint" class="text-xs text-slate-500">Select one or more programs to enable lifecycle actions.</div>
        <div id="programMessage" class="text-xs text-slate-500"></div>
      </div>
    </section>

    <section class="panel p-4 md:p-6 space-y-4" id="templateSection">
      <div class="flex items-start justify-between gap-3 flex-wrap">
        <div>
          <h2 class="text-xl font-semibold">Templates</h2>
          <p class="text-sm text-slate-500">Update template readiness before assigning to programs.</p>
        </div>
        <div class="flex items-center gap-2 flex-wrap justify-end">
          <button id="btnNewTemplate" class="btn btn-primary text-sm">Add Template</button>
          <button id="btnEditTemplate" class="btn btn-outline text-sm" disabled>Edit Template</button>
          <input id="inputImportTemplates" type="file" accept=".csv,application/json,.json,text/csv" class="sr-only" />
          <button id="btnImportTemplates" class="btn btn-outline text-sm">Import Templates</button>
          <button id="btnRefreshTemplates" class="btn btn-outline text-sm">Refresh</button>
        </div>
      </div>

      <div class="grid gap-6 xl:grid-cols-[minmax(0,1.75fr)_minmax(0,1fr)] items-start">
        <div class="space-y-4">
          <div class="grid gap-3 md:grid-cols-[minmax(0,1fr)_auto] md:items-end">
            <label class="space-y-1">
              <span class="label-text">Search templates</span>
              <input id="templateSearch" class="input" placeholder="Search by name, status, category, or description…">
            </label>
            <div id="templateSelectionSummary" class="text-xs text-slate-500 md:text-right">No templates selected.</div>
          </div>

          <div class="flex items-center justify-between gap-3 flex-wrap text-xs text-slate-500">
            <label class="flex items-center gap-2 text-sm">
              <input type="checkbox" id="tmplHideArchived" class="rounded border-slate-300">
              Hide archived
            </label>
            <div class="flex items-center gap-2 flex-wrap">
              <label class="flex items-center gap-2 font-semibold uppercase tracking-wide">
                <span>Rows per page</span>
                <select id="tmplPageSize" class="input w-24 text-sm font-medium normal-case">
                  <option value="10" selected>10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="all">All</option>
                </select>
              </label>
              <button id="tmplExportCsv" class="btn btn-outline text-sm">Export CSV</button>
            </div>
          </div>

          <div class="panel-section overflow-hidden">
            <div class="overflow-x-auto">
              <table class="table min-w-full" id="templateTable">
                <thead class="bg-slate-100 text-xs uppercase tracking-wide text-slate-500">
                  <tr>
                    <th class="w-10">
                      <input type="checkbox" id="templateSelectAll" class="rounded border-slate-300">
                    </th>
                    <th data-key="week" data-type="number" aria-sort="none">
                      <button type="button" class="sort-trigger">
                        <span>Week</span>
                        <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                          <span class="sort-arrow sort-arrow-asc">▲</span>
                          <span class="sort-arrow sort-arrow-desc">▼</span>
                        </span>
                      </button>
                    </th>
                    <th data-key="name" data-type="string" aria-sort="none">
                      <button type="button" class="sort-trigger">
                        <span>Name</span>
                        <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                          <span class="sort-arrow sort-arrow-asc">▲</span>
                          <span class="sort-arrow sort-arrow-desc">▼</span>
                        </span>
                      </button>
                    </th>
                    <th data-key="auditInserted" data-type="date" aria-sort="none">
                      <button type="button" class="sort-trigger">
                        <span>Inserted By (Audit)</span>
                        <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                          <span class="sort-arrow sort-arrow-asc">▲</span>
                          <span class="sort-arrow sort-arrow-desc">▼</span>
                        </span>
                      </button>
                    </th>
                    <th data-key="status" data-type="string" aria-sort="none">
                      <button type="button" class="sort-trigger">
                        <span>Status</span>
                        <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                          <span class="sort-arrow sort-arrow-asc">▲</span>
                          <span class="sort-arrow sort-arrow-desc">▼</span>
                        </span>
                      </button>
                    </th>
                    <th data-key="updatedAt" data-type="date" aria-sort="none">
                      <button type="button" class="sort-trigger">
                        <span>Updated</span>
                        <span class="sort-indicator" data-sort-indicator aria-hidden="true">
                          <span class="sort-arrow sort-arrow-asc">▲</span>
                          <span class="sort-arrow sort-arrow-desc">▼</span>
                        </span>
                      </button>
                    </th>
                    <th class="text-right">Actions</th>
                  </tr>
                </thead>
                <tbody id="templateTableBody" class="bg-white text-sm"></tbody>
              </table>
            </div>
          </div>

          <div class="flex items-center justify-end gap-2 text-xs text-slate-500">
            <div id="tmplPager" class="flex items-center gap-2">
              <button type="button" id="tmplPagerPrev" class="btn btn-outline text-xs">Prev</button>
              <span id="tmplPagerLabel" class="text-xs">Page 0 of 0</span>
              <button type="button" id="tmplPagerNext" class="btn btn-outline text-xs">Next</button>
            </div>
          </div>

          <div class="space-y-1">
            <div class="flex flex-wrap gap-2" id="templateActions">
              <button class="btn btn-primary" data-template-action="publish">Publish</button>
              <button class="btn btn-outline" data-template-action="draft">Mark Draft</button>
              <button class="btn btn-outline" data-template-action="deprecate">Deprecate</button>
            </div>
            <div id="templateActionHint" class="text-xs text-slate-500">Select one or more templates to enable status changes.</div>
            <div id="templateMessage" class="text-xs text-slate-500"></div>
          </div>
        </div>

        <aside id="programTemplatePanel" class="panel-section hidden p-4 space-y-4" aria-live="polite">
          <div class="space-y-1">
            <h3 id="programTemplatePanelTitle" class="text-lg font-semibold">Program templates</h3>
            <p id="programTemplatePanelDescription" class="text-sm text-slate-500">Select a program to manage template assignments.</p>
          </div>
          <p id="programTemplatePanelMessage" class="text-xs text-slate-500 hidden"></p>
          <div id="programTemplatePanelEmpty" class="text-sm text-slate-500 border border-dashed border-slate-300 rounded-xl p-4 text-center hidden">
            No templates assigned to this program yet.
          </div>
          <div id="tagAttachRow" class="grid gap-2 md:grid-cols-[minmax(0,1fr)_auto] md:items-center">
            <input id="programTemplateAttachInput" type="text" class="input" placeholder="Search templates to attach…">
            <button id="btnPanelAttachTemplate" class="btn btn-primary text-sm">Attach Template</button>
          </div>
          <small class="block text-xs text-slate-500">Search existing templates to attach to this program.</small>
          <ul id="programTemplateList" class="space-y-4" aria-live="polite"></ul>
          <datalist id="templateVisibilityOptions">
            <option value="inherit"></option>
            <option value="assignee"></option>
            <option value="manager"></option>
            <option value="team"></option>
            <option value="hidden"></option>
          </datalist>
        </aside>
      </div>
    </section>
  </div>

  <div id="programModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="programModalTitle" hidden>
    <div class="modal" role="document">
      <div class="modal-header">
        <h3 id="programModalTitle" class="text-lg font-semibold">New Program</h3>
        <button type="button" class="btn btn-ghost" aria-label="Close" data-modal-close="programModal">✕</button>
      </div>
      <form id="programForm" class="flex flex-col gap-0">
        <div class="modal-body space-y-4">
          <div>
            <label for="programFormTitle" class="label-text mb-1">Title</label>
            <input id="programFormTitle" name="title" class="input" placeholder="Program title" required>
          </div>
          <div class="grid gap-3 md:grid-cols-2">
            <label class="space-y-1">
              <span class="label-text">Total weeks</span>
              <input id="programFormWeeks" name="total_weeks" type="number" min="1" class="input" placeholder="e.g. 12">
            </label>
            <div class="space-y-1">
              <span class="label-text">Lifecycle</span>
              <div class="text-sm text-slate-500">Programs start as drafts until published.</div>
            </div>
          </div>
          <div>
            <label for="programFormDescription" class="label-text mb-1">Description</label>
            <textarea id="programFormDescription" name="description" class="textarea" placeholder="Add an overview for collaborators..."></textarea>
          </div>
          <p id="programFormMessage" class="text-sm text-slate-500 hidden"></p>
        </div>
        <div class="modal-footer">
          <div class="flex items-center gap-2" id="programModalDangerZone">
            <button type="button" id="programModalArchiveTrigger" class="btn btn-danger-outline text-sm hidden">Archive</button>
            <button type="button" id="programModalDeleteTrigger" class="btn btn-danger text-sm hidden">Delete</button>
          </div>
          <div class="ml-auto flex items-center gap-2">
            <button type="button" class="btn btn-ghost" data-modal-close="programModal">Cancel</button>
            <button type="submit" id="programFormSubmit" class="btn btn-primary">Create Program</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div id="archiveProgramModal" class="modal-overlay modal-overlay-confirm" role="dialog" aria-modal="true" aria-labelledby="archiveProgramModalTitle" hidden>
    <div class="modal modal-sm" role="document">
      <div class="modal-header">
        <h3 id="archiveProgramModalTitle" class="text-base font-semibold">Archive program?</h3>
        <button type="button" class="btn btn-ghost" aria-label="Close" data-modal-close="archiveProgramModal">✕</button>
      </div>
      <div class="modal-body space-y-3">
        <p id="archiveProgramModalDescription" class="text-sm text-slate-600">Are you sure you want to archive this program?</p>
        <p id="archiveProgramModalMessage" class="text-sm text-red-600 hidden"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" data-modal-close="archiveProgramModal">Cancel</button>
        <button type="button" id="confirmArchiveProgram" class="btn btn-danger-outline">Archive Program</button>
      </div>
    </div>
  </div>

  <div id="deleteProgramModal" class="modal-overlay modal-overlay-confirm" role="dialog" aria-modal="true" aria-labelledby="deleteProgramModalTitle" hidden>
    <div class="modal modal-sm" role="document">
      <div class="modal-header">
        <h3 id="deleteProgramModalTitle" class="text-base font-semibold">Delete program?</h3>
        <button type="button" class="btn btn-ghost" aria-label="Close" data-modal-close="deleteProgramModal">✕</button>
      </div>
      <div class="modal-body space-y-3">
        <p id="deleteProgramModalDescription" class="text-sm text-slate-600">This action cannot be undone.</p>
        <p id="deleteProgramModalMessage" class="text-sm text-red-600 hidden"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" data-modal-close="deleteProgramModal">Cancel</button>
        <button type="button" id="confirmDeleteProgram" class="btn btn-danger">Delete Program</button>
      </div>
    </div>
  </div>

  <div id="templateModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="templateModalTitle" hidden>
    <div class="modal" role="document">
      <div class="modal-header">
        <h3 id="templateModalTitle" class="text-lg font-semibold">New Template</h3>
        <button type="button" class="btn btn-ghost" aria-label="Close" data-modal-close="templateModal">✕</button>
      </div>
      <form id="templateForm" class="flex flex-col gap-0">
        <div class="modal-body space-y-4">
          <div class="grid gap-3 md:grid-cols-2">
            <label class="space-y-1">
              <span class="label-text">Week number</span>
              <input id="templateFormWeek" name="week_number" type="number" min="1" step="1" class="input" placeholder="e.g. 1" required>
            </label>
            <label class="space-y-1">
              <span class="label-text">Sort order</span>
              <input id="templateFormSort" name="sort_order" type="number" min="1" step="1" class="input" placeholder="e.g. 1">
            </label>
          </div>
          <div>
            <label for="templateFormLabel" class="label-text mb-1">Label</label>
            <input id="templateFormLabel" name="label" class="input" placeholder="Template label" required>
          </div>
          <div class="grid gap-3 md:grid-cols-2">
            <label class="space-y-1">
              <span class="label-text">Organization</span>
              <input id="templateFormOrganization" name="organization" class="input" placeholder="e.g. Onboarding Ops">
            </label>
            <label class="space-y-1">
              <span class="label-text">Sub-unit</span>
              <input id="templateFormSubUnit" name="sub_unit" class="input" placeholder="e.g. New Hire Experience">
            </label>
          </div>
          <div>
            <label for="templateFormNotes" class="label-text mb-1">Notes</label>
            <textarea id="templateFormNotes" name="notes" class="textarea" placeholder="Add context or guidance for collaborators..."></textarea>
          </div>
          <div class="space-y-1">
            <label for="templateFormExternalLink" class="label-text">External link</label>
            <div class="flex items-center gap-2">
              <input id="templateFormExternalLink" name="external_link" type="url" class="input" placeholder="https://example.com">
              <a id="templateFormExternalLinkPreview" class="btn btn-outline whitespace-nowrap pointer-events-none opacity-50" href="#" target="_blank" rel="noopener noreferrer" aria-disabled="true" tabindex="-1">Preview</a>
            </div>
            <p id="templateFormExternalLinkError" class="text-sm text-red-600 hidden">Enter a valid URL that starts with http:// or https://.</p>
            <p class="text-xs text-slate-500">Optional. Links must start with http:// or https://.</p>
          </div>
          <p id="templateFormMessage" class="text-sm text-slate-500 hidden"></p>
        </div>
        <div class="modal-footer">
          <div class="flex items-center gap-2" id="templateModalDangerZone">
            <button type="button" id="templateModalDeleteTrigger" class="btn btn-danger text-sm hidden">Delete</button>
          </div>
          <div class="ml-auto flex items-center gap-2">
            <button type="button" class="btn btn-ghost" data-modal-close="templateModal">Cancel</button>
            <button type="submit" id="templateFormSubmit" class="btn btn-primary">Create Template</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div id="deleteTemplateModal" class="modal-overlay modal-overlay-confirm" role="dialog" aria-modal="true" aria-labelledby="deleteTemplateModalTitle" hidden>
    <div class="modal modal-sm" role="document">
      <div class="modal-header">
        <h3 id="deleteTemplateModalTitle" class="text-base font-semibold">Delete template?</h3>
        <button type="button" class="btn btn-ghost" aria-label="Close" data-modal-close="deleteTemplateModal">✕</button>
      </div>
      <div class="modal-body space-y-3">
        <p id="deleteTemplateModalDescription" class="text-sm text-slate-600">This action cannot be undone.</p>
        <p id="deleteTemplateModalMessage" class="text-sm text-red-600 hidden"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" data-modal-close="deleteTemplateModal">Cancel</button>
        <button type="button" id="confirmDeleteTemplate" class="btn btn-danger">Delete Template</button>
      </div>
    </div>
  </div>

  <script type="module" src="./program-template-manager.js"></script>
</body>
</html>
